<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Farol do Investimento</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="hero is-fullheight">

        <head class="hero-head">
            <nav class="navbar">
                <div class="navbar-brand">
                    <a class="navbar-item" href="./index.html">
                        <img src="./farol_do_investimento_logo.png" alt="Logo" />
                    </a>
                    <a class="navbar-item link" href="./index.html">Farol do Investimento</a>
                </div>
                <div class="navbar-menu mx-5">
                    <div class="navbar-end">
                        <div class="navbar-item">
                            <button class="button is-warning is-light is-outlined">
                                <span class="icon">
                                    <i class="fas fa-envelope" aria-hidden="true"></i>
                                </span>
                                <span>Contato</span>
                            </button>
                        </div>
                    </div>
                </div>
            </nav>
        </head>

        <main class="hero-body has-background-light">

            <div class="container is-max-widescreen" x-data="{ items: [1] }">

                <section class="section has-text-centered">

                    <figure class="image is-128x128 has-image-centered">
                        <img src="./farol_do_investimento_logo.png" alt="Logo" width="432px">
                    </figure>

                    <p class="title">Farol do Investimento</p>
                    <p class="subtitle">
                        Seu guia de investimentos.
                    </p>
                </section>

                <div class="section has-text-centered">
                    <p class="title is-size-4">
                        Índices da renda fixa
                    </p>
                    <p class="subtitle is-size-5">
                        Estes índices são usados como indexadores do rendimento das aplicações na Renda Fixa
                    </p>
                </div>

                <!-- Índices -->
                <div class="columns is-centered is-multiline">

                    <template x-for="(value, name) in $store.indices.listaIndices" :key="name">
                        <div class="column is-4">
                            <div class="card">
                                <div class="card-header"
                                    :class="value.error ? 'has-background-danger' : 'has-background-white-ter'">
                                    <p class="card-header-title has-text-grey-dark" x-text="name"></p>
                                </div>
                                <div class="card-content">
                                    <div :class="!value.data && 'is-hidden'">
                                        <h3 x-text="value.info.description"></h3>
                                        <p><span x-text="value.data"></span>% a.a</p>
                                    </div>

                                    <div class="block is-flex is-justify-content-center"
                                        :class="{ 'is-hidden': value.data }">
                                        <span class="loader"></span>
                                    </div>
                                </div>
                                <div class="card-footer is-size-7">
                                    <p class="card-footer-item">
                                        <span x-text="value.info.notes"></span>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </template>

                </div>

                <div class="content has-text-centered">
                    <p class="title">
                        Simulador de rendimento
                    </p>
                    <p class="subtitle is-size-5">
                        Simule e compare quanto rende seu dinheiro aplicado na Renda Fixa
                    </p>
                </div>

                <div class="block is-hidden-mobile">
                    <table class="table is-fullwidth is-hoverable">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Valor aplicado</th>
                                <th>Tipo</th>
                                <th>Prazo a.m</th>
                                <th>Valor no venc.</th>
                                <th>Rend. bruto</th>
                                <th>IR</th>
                                <th>Rend. líquido</th>
                                <th>Alíq. IR</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr x-show="$store.simulacoes.lista.length <= 0">
                                <td colspan="10">
                                    <p class="subtitle has-text-centered">Preencha os dados e clique em "Comparar"</p>
                                </td>
                            </tr>
                            <template x-for="(simulacao, i) in $store.simulacoes.lista" :key="i">
                                <tr>
                                    <td>
                                        <span x-text="i+1"></span>
                                    </td>
                                    <td
                                        x-text="simulacao.montanteAplicado.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })">
                                    </td>
                                    <td
                                        x-text="simulacao.info"
                                    >
                                    <td
                                        x-text="simulacao.prazoMeses"
                                    >                                    
                                    </td>
                                    <td
                                        x-text="simulacao.valorNoVencimento.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })">
                                    </td>
                                    <td
                                        x-text="simulacao.bruto.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })">
                                    </td>
                                    <td
                                        x-text="simulacao.impostoDeRenda.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })">
                                    </td>
                                    <td>
                                        <span
                                            x-text="simulacao.liquido.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })"></span>
                                    </td>
                                    <td x-text="simulacao.aliquotaIR.toLocaleString('pt-BR', {
                                        style: 'percent',
                                        minimumFractionDigits: 1,
                                        maximumFractionDigits: 1,
                                      })"></td>
                                    <td>
                                        <a class="link py-4 has-text-grey-dark"
                                            @click="$store.simulacoes.lista.splice(i, 1)">
                                            <span class="icon">
                                                <i class="fas fa-trash-can" aria-hidden="true"></i>
                                            </span>
                                        </a>
                                    </td>

                                </tr>
                            </template>
                        </tbody>
                    </table>
                </div>


                <!-- Loader -->
                <div class="card" :class="{ 'is-hidden': !$store.indices.loading }">
                    <div class="card-header has-background-white-ter">
                        <p class="card-header-title">Obtendo índices...</p>
                    </div>
                    <div class="card-content is-flex is-justify-content-center">
                        <p class="subtitle">Aguarde</p>
                    </div>
                </div>


                <div class="block" x-data="simulador" :class="{ 'is-hidden': $store.indices.loading }">

                    <div class="card">

                        <div class="card-header has-background-white-ter">
                            <p class="card-header-title has-text-grey-dark"
                                x-text="`Simulação #${$store.simulacoes.lista.length+1}`"></p>
                        </div>

                        <div class="card-content">
                            <!-- Campos -->
                            <div class="columns is-centered is-multiline">
                                <!-- Montante -->
                                <div class="column is-2">
                                    <div class="field">
                                        <label class="label has-text-weight-light">Montante</label>
                                        <div class="control">
                                            <input class="input" type="text" placeholder="Montante" x-model="dadosEntrada.montante">
                                        </div>
                                    </div>
                                </div>
                                <!-- Prazo -->
                                <div class="column is-2">
                                    <div class="field">
                                        <label class="label has-text-weight-light">Prazo
                                            a.m</label>
                                        <div class="control">
                                            <input class="input" type="text" placeholder="Prazo a.m" x-model="dadosEntrada.prazo">
                                        </div>
                                    </div>
                                </div>
                                <!-- Taxa -->
                                <div class="column is-2">
                                    <div class="field">
                                        <label class="label has-text-weight-light"
                                            x-text="opcoesIndices[tipoIndiceSelecionado].label"></label>
                                        <div class="control">
                                            <input class="input" type="text" placeholder="Taxa a.a" x-model="dadosEntrada.taxa">
                                        </div>
                                    </div>
                                </div>
                                <!-- Tipo -->
                                <div class="column is-2">
                                    <div class="field">
                                        <label class="label has-text-weight-light">Tipo</label>
                                        <div class="control">
                                            <div class="select is-fullwidth">
                                                <select x-model="tipoIndiceSelecionado">
                                                    <option value="pre">Pré-fixado</option>
                                                    <option value="pos">Pós-fixado</option>
                                                    <option value="poupanca">Poupança</option>
                                                    <option value="ipca">IPCA+</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- IR -->
                                <div class="column is-2">
                                    <div class="field">
                                        <label class="label has-text-weight-light">Isento
                                            IR?</label>
                                        <div class="control">
                                            <label class="radio">
                                                <input type="radio" name="ir" value="isento" x-model="dadosEntrada.IR">
                                                Sim
                                            </label>
                                            <label class="radio">
                                                <input type="radio" name="ir" value="naoIsento" x-model="dadosEntrada.IR">
                                                Não
                                            </label>
                                        </div>
                                    </div>
                                </div>

                            </div>

                            <!-- Resultado mobile -->
                            <div class="tile is-ancestor has-text-centered">

                                <div class="tile is-parent">
                                    <div class="tile is-child box">
                                        <p class="subtitle">Valor no venc.</p>
                                        <p class="title is-size-5"
                                            x-text="resultadoRendimento.valorNoVencimento.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })">
                                        </p>
                                    </div>
                                </div>
                                <div class="tile is-parent">
                                    <div class="tile is-child box">
                                        <p class="subtitle">Rend. bruto</p>
                                        <p class="title is-size-5"
                                            x-text="resultadoRendimento.bruto.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })">
                                        </p>
                                    </div>
                                </div>
                                <div class="tile is-parent">
                                    <div class="tile is-child box">

                                        <p class="subtitle">IR</p>
                                        <p class="title is-size-5"
                                            x-text="resultadoRendimento.impostoDeRenda.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })">
                                        </p>

                                    </div>
                                </div>
                                <div class="tile is-parent">
                                    <div class="tile is-child box">

                                        <p class="subtitle">Rend. líquido</p>
                                        <p class="title is-size-5"
                                            x-text="resultadoRendimento.liquido.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })">
                                        </p>

                                    </div>
                                </div>
                                <div class="tile is-parent">
                                    <div class="tile is-child box">
                                        <p class="subtitle">Alíq. IR</p>
                                        <p class="title is-size-5" x-text="resultadoRendimento.aliquotaIR.toLocaleString('pt-BR', {
                                                style: 'percent',
                                                minimumFractionDigits: 1,
                                                maximumFractionDigits: 1,
                                              })">
                                        </p>

                                    </div>
                                </div>

                            </div>

                            <!-- Botão adicionar -->

                            <button class="button is-rounded is-warning is-light is-outlined is-hidden-mobile"
                                @click="salvar()">Comparar</button>


                        </div>
                    </div>
                </div>

            </div>
        </main>

        <footer class="hero-foot" x-data="{ anoAtual: (new Date()).getFullYear()}">
            <div class="footer py-4 has-background-white">
                <div class="content has-text-centered has-text-weight-semibold">
                    <p x-text="`Farol do Investimento ${anoAtual}`"></p>
                </div>
            </div>
        </footer>
    </div>
    <script src="https://kit.fontawesome.com/7c8801c017.js" crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.12.1/dist/cdn.min.js"></script>
    <script src="index.js"></script>
</body>

</html>